; ModuleID = 'grace program'
source_filename = "grace program"

@mychar = private global i8 0
@myascii = private global i32 0
@limit = private global i32 0
@counter = private global i32 0
@"The ASCII code for " = private constant [20 x i8] c"The ASCII code for \00", align 1
@" is " = private constant [5 x i8] c" is \00", align 1

define i32 @main() {
entry:
  store i32 26, i32* @limit, align 4
  store i32 0, i32* @counter, align 4
  store i8 65, i8* @mychar, align 1
  %lval_tmp = load i8, i8* @mychar, align 1
  %0 = call i32 @ascii(i8 %lval_tmp)
  store i32 %0, i32* @myascii, align 4
  br label %cond

cond:                                             ; preds = %body, %entry
  %lval_tmp1 = load i32, i32* @counter, align 4
  %lval_tmp2 = load i32, i32* @limit, align 4
  %lesstmp = icmp slt i32 %lval_tmp1, %lval_tmp2
  br i1 %lesstmp, label %body, label %after

body:                                             ; preds = %cond
  call void @writeString(i8* getelementptr inbounds ([20 x i8], [20 x i8]* @"The ASCII code for ", i32 0, i32 0))
  %lval_tmp3 = load i8, i8* @mychar, align 1
  call void @writeChar(i8 %lval_tmp3)
  call void @writeString(i8* getelementptr inbounds ([5 x i8], [5 x i8]* @" is ", i32 0, i32 0))
  %lval_tmp4 = load i32, i32* @myascii, align 4
  call void @writeInteger(i32 %lval_tmp4)
  call void @writeChar(i8 10)
  %lval_tmp5 = load i32, i32* @myascii, align 4
  %addtmp = add i32 %lval_tmp5, 1
  %1 = call i8 @chr(i32 %addtmp)
  store i8 %1, i8* @mychar, align 1
  %lval_tmp6 = load i8, i8* @mychar, align 1
  %2 = call i32 @ascii(i8 %lval_tmp6)
  store i32 %2, i32* @myascii, align 4
  %lval_tmp7 = load i32, i32* @counter, align 4
  %addtmp8 = add i32 %lval_tmp7, 1
  store i32 %addtmp8, i32* @counter, align 4
  br label %cond

after:                                            ; preds = %cond
  ret i32 0

after_ret:                                        ; No predecessors!
  ret i32 0
}

declare void @writeString(i8*)

declare void @writeChar(i8)

declare i8 @chr(i32)

declare void @writeInteger(i32)

declare i32 @ascii(i8)
